
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Platform implementation &#8212; Potree-chtemplate 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="References" href="ref.html" />
    <link rel="prev" title="Methodology and data" href="data.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="platform-implementation">
<h1>Platform implementation<a class="headerlink" href="#platform-implementation" title="Permalink to this heading">¶</a></h1>
<p>The platform, based on Potree native functions and proposed modifications of the Vizcaya museum project, aims to simplify the exploration of a 3D digital model of a cultural heritage site.
With this goal, the implementation focused on the definition of simple and easy-to-reproduce functionalities that could guide even non-experienced users through the inspected and reconstructed structure.
This has been achieved using a combination of:</p>
<ul class="simple">
<li><p><strong>Annotation actions</strong> triggered by the user click on a given hotspot inside the 3D scene;</p></li>
<li><p><strong>Camera animations</strong> that allow to explore a given scene using a pre-defined navigation path;</p></li>
<li><p><strong>Pop-up windows</strong> that make possible to see in more detailes images or to include text contents;</p></li>
<li><p><strong>Shortcut buttons</strong> used to simplify into a single command more operations.</p></li>
</ul>
<p>The work has been articulated on 2 different perspectives, dividing the entire model into 2 scenes:</p>
<ol class="arabic simple">
<li><p><strong>Outdoor scene</strong> referring to the outside of the 3 surveyed bastions of the castle, for which drones were adopted in addition to total station and GNSS antennas;</p></li>
<li><p><strong>Indoor scene</strong> of the only bastion (San Giacomo one) which was accessible at the moment of the survey and that was subject to a laser scanner survey.</p></li>
</ol>
<section id="control-icons">
<h2>Control icons<a class="headerlink" href="#control-icons" title="Permalink to this heading">¶</a></h2>
<p>Due to their peculiarities inherited by survey methods and instrumentation too, the 2 scenes require the implementation of 2 distinct groups of navigation solutions to better fit their needs.
However, some useful common functionalities have been mantained for both scenes.
In particular, the main structure of the viewer has been designed to always mantain visible 4 commands:</p>
<ul class="simple">
<li><p><strong>Oriented images</strong> (<em>camera_icon</em>) visibility control;</p></li>
<li><p><strong>Refresh page</strong> (<em>refresh_icon</em>) option;</p></li>
<li><p><strong>Navigation instructions</strong> (<em>question_icon</em>) command;</p></li>
<li><p><strong>Full screen view</strong> (<em>fullscreen_icon</em>) button.</p></li>
</ul>
<img alt="Overview of the navigation buttons." class="align-center" src="../_images/custom-buttons.jpg" />
<p>All these buttons, positioned on the upper right position of the screen and thought as shortcuts for common operations.</p>
<p>Their style and appearances have been defined as the following example in the <em>assets/css/style.css</em> file:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">refresh_icon</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c">/*display: none;*/</span><span class="w"></span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">fixed</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">right</span><span class="p">:</span><span class="w"> </span><span class="mi">160</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c">/*130px*/</span><span class="w"></span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">max-height</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="kt">px</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="kt">px</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">z-index</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Then, the control icons (and their image logos) have been included in the body section of the <em>index.html</em> file as follow, linking each button to a specific custom function triggered by the user click:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>...
<span class="cm">&lt;!--Control Icons--&gt;</span>
<span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;camera_icon&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/camera.svg&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Activate Images&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;refresh_icon&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;refreshButton()&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/refresh.svg&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Refresh Page&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;question_icon&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/question.svg&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Tutorial&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fullscreen_icon&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleFullScreen()&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/fullscreen.svg&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Fullscreen&quot;</span> <span class="p">/&gt;</span>
...
</pre></div>
</div>
<p>Then, each function has been defined.</p>
<section id="oriented-images-visibility">
<h3>Oriented images visibility<a class="headerlink" href="#oriented-images-visibility" title="Permalink to this heading">¶</a></h3>
<p>This button is needed to have a easy-to-use shortcut for hiding or making visible all the loaded oriented images on the model.
By default, as understandable by checking the <em>assets/js/loadphotos.js</em> file, all the images are hidden to have a cleaner view of the model at first loading.
However, the click on the camera icon make them visible by triggering the following function included at the end of the <em>index.html</em> that switch the visibility conditions of all the loaded images chunks:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#camera_icon&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Hai cliccato sulla camera&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">orientedImages</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">orientedImages</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">visible</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">orientedImages</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">orientedImages</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">visible</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">orientedImages</span><span class="p">[</span><span class="mf">2</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">orientedImages</span><span class="p">[</span><span class="mf">2</span><span class="p">].</span><span class="nx">visible</span><span class="p">;</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="refresh-page">
<h3>Refresh page<a class="headerlink" href="#refresh-page" title="Permalink to this heading">¶</a></h3>
<p>This icon is simply linked to the <strong>refreshButton()</strong> function included in the <em>assets/js/main.js</em>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">refreshButton</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">window</span><span class="p">.</span><span class="nx">top</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="navigation-instructions">
<h3>Navigation instructions<a class="headerlink" href="#navigation-instructions" title="Permalink to this heading">¶</a></h3>
<p>The <em>question_icon</em> is the first example of pop-up panel implementation in the model, used also for some features of the outdoor and indoor navigation.
In this case, the click of the user makes visible the panel containing all the instruction for the rotation and translation of the model using both a mouse or touch commands.
These information are contained in an image embedded in a div element defined at the beggining of the <em>index.html</em>:abbr:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- Navigation Instructions --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nav_panel&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navPanel w3-center w3-animate-opacity&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navPanel-content&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;intrinsic-container intrinsic-container-16x9&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">img</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav_img&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/anno-img/navigation3d.png&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Then, at the end of the same file, the function that change the visibility of the instruction panel is defined:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#question_icon&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">//The panel is made visible</span><span class="w"></span>
<span class="w">  </span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#nav_panel&quot;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="c1">//Applying opacity to parent page</span><span class="w"></span>
<span class="w">  </span><span class="nx">parentWin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">sidebar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parentWin</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;split-container&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.5&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="kd">var</span><span class="w"> </span><span class="nx">navPanel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;nav_panel&#39;</span><span class="p">);</span><span class="w"></span>
<span class="c1">// Instructions for when the panel is already visible</span><span class="w"></span>
<span class="nx">navPanel</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">//The panel is hidden</span><span class="w"></span>
<span class="w">  </span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#nav_panel&quot;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="c1">//reset opacity of parent page</span><span class="w"></span>
<span class="w">  </span><span class="nx">parentWin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">sidebar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parentWin</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;split-container&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="fullscreen-mode">
<h3>Fullscreen mode<a class="headerlink" href="#fullscreen-mode" title="Permalink to this heading">¶</a></h3>
<p>In this case, the function has been defined in the <em>assets/js/main.js</em> file.
It is based on a series of conditions that check if the current view of the platform is already fullscreen and, based on that information, define if the click on the button will exit or enter the fullscreen mode for the user.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">toggleFullScreen</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="nb">document</span><span class="p">.</span><span class="nx">fullScreenElement</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">fullScreenElement</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"></span>
<span class="w">      </span><span class="p">(</span><span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">mozFullScreen</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">webkitIsFullScreen</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">requestFullScreen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">requestFullScreen</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">mozRequestFullScreen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">mozRequestFullScreen</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">webkitRequestFullScreen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">webkitRequestFullScreen</span><span class="p">(</span><span class="nx">Element</span><span class="p">.</span><span class="nx">ALLOW_KEYBOARD_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">cancelFullScreen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">document</span><span class="p">.</span><span class="nx">cancelFullScreen</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">mozCancelFullScreen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">document</span><span class="p">.</span><span class="nx">mozCancelFullScreen</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">webkitCancelFullScreen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">document</span><span class="p">.</span><span class="nx">webkitCancelFullScreen</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="outdoor-navigation">
<h2>Outdoor navigation<a class="headerlink" href="#outdoor-navigation" title="Permalink to this heading">¶</a></h2>
<p>A set of dedicated actions and features has been designed for the outdoor navigation of the model.</p>
<img alt="Outdoor view of the Arsenale 3D point cloud in the Potree viewer." class="align-center" src="../_images/outdoor-navigation.jpg" />
<p>In particular, the following features were implemented:</p>
<ul class="simple">
<li><p>Hotspot views</p></li>
<li><p>Moving to indoor scene</p></li>
<li><p>Showing image slide-show</p></li>
</ul>
<section id="hotspot-views">
<h3>Hotspot views<a class="headerlink" href="#hotspot-views" title="Permalink to this heading">¶</a></h3>
<p>To facilitate the movements between different positions, a control bar is implemented at the bottom of the Potree basic viewer.
This element will help moving between predefined camera view linked to specific point of interests located around the point cloud.
This could be particularly helpful when the user is getting lost or confused during the exploration of the 3D product and would like to move to a more guided and familiar point of view using fixed positions associated to specific annotations.</p>
<video controls src="..\_static\outdoor-hotspots-navigation.mp4" width="400"></video><p>The visible hotspot control bar is made possible by a combination of edits to the <em>index.html</em> and <em>assets/css/style.css</em> files.</p>
<p>In particular, first in <em>index.html</em> the following code is defined for creating the needed elements and blocks:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>...
<span class="cm">&lt;!--Hotspots Dropup--&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;controls&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hotspot-controls&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;prev&quot;</span> <span class="na">data-title</span><span class="o">=</span><span class="s">&quot;Previous Annotation&quot;</span> <span class="na">data-action</span><span class="o">=</span><span class="s">&quot;prev-annotation&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;prevDiv&quot;</span><span class="p">&gt;&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;prevIcon&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;libs/potree/resources/icons/arrow_left.svg&quot;</span> <span class="p">/&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hotspots&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hotspot-name&quot;</span> <span class="na">data-action</span><span class="o">=</span><span class="s">&quot;toggle-annotation-list&quot;</span><span class="p">&gt;&lt;</span><span class="nt">b</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hotspotName&quot;</span><span class="p">&gt;</span>Explore<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;next&quot;</span> <span class="na">data-title</span><span class="o">=</span><span class="s">&quot;Next Annotation&quot;</span> <span class="na">data-action</span><span class="o">=</span><span class="s">&quot;next-annotation&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nextDiv&quot;</span><span class="p">&gt;&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nextIcon&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;libs/potree/resources/icons/arrow_right.svg&quot;</span> <span class="p">/&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;lists&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;list hotspots-list visible&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-scrollable&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;li1&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;link&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">data-hotspot-target</span><span class="o">=</span><span class="s">&quot;0&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Bastione San Giovanni&quot;</span><span class="p">&gt;</span>Bastione San Giovanni<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;li2&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;link&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">data-hotspot-target</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Bastione San Benedetto&quot;</span><span class="p">&gt;</span>Bastione San Benedetto<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;li3&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;link&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">data-hotspot-target</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Bastione San Giacomo&quot;</span><span class="p">&gt;</span>Bastione San Giacomo<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;li4&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;link&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">data-hotspot-target</span><span class="o">=</span><span class="s">&quot;3&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Bastione San Giacomo (Indoor)&quot;</span><span class="p">&gt;</span>Bastione San Giacomo (Indoor)<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
...
</pre></div>
</div>
<p>This code snippet define the hotspot controls container and the 3 controls inside it:</p>
<ol class="arabic simple">
<li><p>The Label of the annotation linked to the chosen view. At first page loading, this is set to <em>Explore</em>. Here, clicking on the text, it will be possible to select a specific hotspot view from a list.</p></li>
<li><p>The button to move to the <em>previous view</em> in the hotspot list. A left arrow icon is associated to it.</p></li>
<li><p>The button to move to the <em>following view</em> in the hotspot list. A right arrow icon is associated to it.</p></li>
</ol>
<img alt="Hotspot controls bar in the Potree viewer." class="align-center" src="../_images/hotspot-controls.jpg" />
<p>Then, the complete list of the available hotspots is defined using an unordered list block and associating specific target numbers to each hotspot target and name.</p>
<p>The CSS code referring to the appearance of these elements can be found from line 295 to line 541 in <em>style.css</em>.</p>
<p>Then the functionalities linked to the hotspot controls are defined in a module block at the bottom of <em>index.html</em></p>
<p>First, variables are defined in order to store in one of it the target number associated to the hotspot selected from the hotspot list.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">referrer</span><span class="p">;</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">srcSplit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">src</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;?&quot;</span><span class="p">);</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">hotSpot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">srcSplit</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span><span class="w"> </span><span class="c1">//0 for San Giovanni, 1 for San Benedetto, 2 for San Giacomo, 3 for Indoor</span><span class="w"></span>
</pre></div>
</div>
<p>Then, a series of conditions are checked and, when the corrispondence between the clicked hotspot target number with the compared value is found, the <strong>moveHere</strong> function is applied to the scene, changing the view to the annotation corresponding to the clicked hotspot.</p>
<p>For example, for the case of Bastione San Giovanni hotspot:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="c1">// San Giovanni hotspot has target equal to 0 and it&#39;s the second annotation defined.</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">hotSpot</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">moveHere</span><span class="p">(</span><span class="nx">scenears</span><span class="p">.</span><span class="nx">camera</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="p">},</span><span class="w"> </span><span class="mf">1500</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>The changing of visibility of the list, appearing when clicking on <em>Explore</em> is insted defined with the following code:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="cm">/* Hotspots Control Dropup*/</span><span class="w"></span>
<span class="w">      </span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#hotspots&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#lists&quot;</span><span class="p">).</span><span class="nx">toggle</span><span class="p">();</span><span class="w"></span>

<span class="w">      </span><span class="p">});</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Then a targeted function called <strong>changeHotspotName()</strong> is defined in the <em>assets/js/main.js</em> file.
Its goal is to change the <em>Explore</em> text in the control bar with the name of the clicked hotspot.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">//Function to change Touch to HotspotName</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="nx">changeHotspotName</span><span class="p">(</span><span class="nx">newName</span><span class="p">){</span><span class="w"></span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;hotspotName&#39;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newName</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This function is then used inside the <strong>item</strong> function series, one for each listed hotspot.
Indeed, this function will change the visible text along with changing the camera view and the visibility of linked annotations.
For instance:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">item1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">changeHotspotName</span><span class="p">(</span><span class="s2">&quot;San Giovanni&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">moveHere</span><span class="p">(</span><span class="nx">scenears</span><span class="p">.</span><span class="nx">camera</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">2</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">4</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">5</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">6</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">7</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">8</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">9</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">10</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">11</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">12</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">13</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">14</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">15</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">16</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Each item function is triggered by the click of the user on the associated element in the hotspot list.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#li1&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">item1</span><span class="p">();</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#li2&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">item2</span><span class="p">();</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#li3&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">item3</span><span class="p">();</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#li4&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">item4</span><span class="p">();</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
<p>—</p>
<video controls src="..\_static\hotspot-name-function.mp4" width="400"></video><p>Then, in order to enable the possibility to move between consecutive scenes it is needed to define a function list to move within using its index.
Its length (corresponding to the total number of defined hotspots) is then saved in a constant.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">functions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="nx">functions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item1</span><span class="p">);</span><span class="w"></span>
<span class="nx">functions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item2</span><span class="p">);</span><span class="w"></span>
<span class="nx">functions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item3</span><span class="p">);</span><span class="w"></span>
<span class="nx">functions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item4</span><span class="p">);</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">functions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Hence, the <strong>.getNextIdx()</strong> function is defined and built upon the chosen <em>condition</em> defined by the id of the clicked button: <em>next</em> for the right arrow, <em>prev</em> for the left arrow.
This function will return the next/previous id of the new scene in the hotspot list, calculating it with respect to the current hotspot view.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">getNextIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">length</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">direction</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;next&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nx">length</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;prev&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">idx</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">idx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">idx</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This function is then finally adopted for implenting the <strong>.getNewScene()</strong> function that is the one that is actually trigger when the user clicks on the arrows icons.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">idx</span><span class="p">;</span><span class="w"> </span><span class="c1">// idx is undefined, so getNewScene will take 0 as default</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">getNewScene</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">direction</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getNextIdx</span><span class="p">(</span><span class="nx">idx</span><span class="p">,</span><span class="w"> </span><span class="nx">length</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">sceneFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">functions</span><span class="p">[</span><span class="nx">idx</span><span class="p">];</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">sceneFunction</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#prev&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">getNewScene</span><span class="p">(</span><span class="s1">&#39;prev&#39;</span><span class="p">);</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#next&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">getNewScene</span><span class="p">(</span><span class="s1">&#39;next&#39;</span><span class="p">);</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="moving-to-indoor-scene">
<h3>Moving to indoor scene<a class="headerlink" href="#moving-to-indoor-scene" title="Permalink to this heading">¶</a></h3>
<p>In the outdoor view, annotation actions are implemented on specific locations.
In particular, an action for moving to the indoor environment of Bastione San Giacomo is implemented on the related annotation on the outside.</p>
<video controls src="..\_static\outdoor-to-indoor-view.mp4" width="400"></video><p>This feature is made possible through simple addition to the <a class="reference external" href="https://github.com/Tars4815/potree-chtemplate/blob/main/assets/js/loadannotations.js">loadannotations.js</a> code.
In correspondance of the title (es. Titolo) definition, an arrow icon is inserted and named <em>action_set_scene</em>.</p>
<p>Then, through the <em>.find()</em> function, it is defined that, when the arrow icon is clicked, a series of operations should be executed:</p>
<ol class="arabic simple">
<li><p>The name in the hotspot bar positioned on the bottom of the viewer is changed to <em>Indoor View</em> using the <strong>changeHotspotName</strong> function defined in <em>index.html</em>.</p></li>
<li><p>The view is changed to the camera settings of the 4th annotation defined in the scene (in this example is the one at the entrance of the bastion) by applying the <strong>.moveHere</strong> function.</p></li>
<li><p>The visibility of all the annotations is changed according to the needs of the developer.</p></li>
</ol>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Bastione San Giacomo</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">Titolo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$</span><span class="p">(</span><span class="sb">`</span>
<span class="sb">  &lt;span&gt;</span>
<span class="sb">  &lt;img src=&quot;./libs/potree/resources/icons/orbit_controls.svg&quot; name=&quot;action_set_name&quot; class=&quot;annotation-action-icon&quot; /&gt;&lt;!---Bastione San Giacomo---&gt;&lt;img src=&quot;./libs/potree/resources/icons/goto.svg&quot; name=&quot;action_set_scene&quot; class=&quot;annotation-action-icon&quot; style=&quot;filter: invert(1);&quot;/&gt;&lt;/span&gt;`</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="nx">Titolo</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;img[name=action_set_name]&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">((</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="nx">changeHotspotName</span><span class="p">(</span><span class="s2">&quot;San Giacomo&quot;</span><span class="p">);});</span><span class="w"></span>
<span class="w">  </span><span class="nx">Titolo</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;img[name=action_set_scene]&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">((</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="nx">changeHotspotName</span><span class="p">(</span><span class="s2">&quot;Indoor View&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">moveHere</span><span class="p">(</span><span class="nx">scenears</span><span class="p">.</span><span class="nx">camera</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">2</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">4</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">5</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">6</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">7</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">8</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">9</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">10</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">11</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">12</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">13</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">14</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">15</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">16</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">});</span><span class="w"></span>

<span class="w">  </span><span class="nx">Titolo</span><span class="p">.</span><span class="nx">toString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;San Giacomo&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">nota3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Potree</span><span class="p">.</span><span class="nx">Annotation</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="nx">position</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553430.471</span><span class="p">,</span><span class="w"> </span><span class="mf">4988914.868</span><span class="p">,</span><span class="w"> </span><span class="mf">103.226</span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">Titolo</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nx">cameraPosition</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553333.7713011784</span><span class="p">,</span><span class="w"> </span><span class="mf">4988883.975343259</span><span class="p">,</span><span class="w"> </span><span class="mf">166.10804103291153</span><span class="p">,],</span><span class="w"></span>
<span class="w">      </span><span class="nx">cameraTarget</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553430.471</span><span class="p">,</span><span class="w"> </span><span class="mf">4988914.868</span><span class="p">,</span><span class="w"> </span><span class="mf">103.226</span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;b&gt;San Giacomo Bastion&lt;/b&gt;&lt;br&gt;----&lt;br&gt;Differently from the twin San Giovanni bastion, it has been affected by additional military intervention. Indeed, on the upper part merlons have been added while an underground shelter, adopted as bomb shelter during World War, is still present and partially accessible through a lateral external access.&lt;br&gt;The indoor space is visitable.&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">});</span><span class="w"></span>

<span class="w">  </span><span class="nx">nota3</span><span class="p">.</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">nota3</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="showing-image-slide-show">
<h3>Showing image slide-show<a class="headerlink" href="#showing-image-slide-show" title="Permalink to this heading">¶</a></h3>
<p>For the particular case of the San Giovanni bastion, a special action has been linked to its hotspot annotation.
The reason was that the indoor part of the structure was not accessible for a laser scanning survey, so only few images were taken without georeferencing nor orientation on the 3D model.
Embedding the possibility to swipe between selected picture using basic slideshow controls.</p>
<video controls src="..\_static\outdoor-annotation-slideshow.mp4" width="400"></video><p>The main idea behind this features is strictly connected to the panel appearance used for both the navigation tutorial and the image pop-up.
Indeed, in order to make the slide-show appearing, a similar element (<em>navPanel</em> class used also for simple image annotations) is defined in the <em>index.html</em> file.
However, this time it contains a <em>slideshow-container</em> which in turn incorporates as many <em>myslides fade</em> as there are images you want to include with position text, relative file and caption.
Then, at the end of the definition of the set of slides to be shown in sequence the controls (<em>next image</em>, <em>previous image</em> and <em>close slideshow</em>) are defined using hyperlink tags and custom functions to be defined in the code.
Finally, the position indicators for the slideshow are located below the slideshow container and associated to the currentSlide function.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--Slideshow bastione San Giovanni--&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;anno10&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navPanel w3-center w3-animate-opacity&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;slideshow-container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mySlides fade&quot;</span><span class="p">&gt;</span>
      <span class="cm">&lt;!--Defining the number of the image--&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;numbertext&quot;</span><span class="p">&gt;</span>1 / 3<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;photo-slide&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/anno-img/sangiovanni01.jpg&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: inline-block; width:70%; border-radius: 15px; margin: auto;&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="p">&gt;</span>Indoor entrance<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mySlides fade&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;numbertext&quot;</span><span class="p">&gt;</span>2 / 3<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;photo-slide&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/anno-img/sangiovanni02.jpg&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:70%; border-radius: 15px; margin: auto;&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="p">&gt;</span>Indoor right wing<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mySlides fade&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;numbertext&quot;</span><span class="p">&gt;</span>3 / 3<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;photo-slide&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/anno-img/sangiovanni03.jpg&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:70%; border-radius: 15px; margin: auto;&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="p">&gt;</span>Indoor casamatta<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="cm">&lt;!--Slideshow controls--&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;prev&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;plusSlides(-1)&quot;</span><span class="p">&gt;</span>❮<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;next&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;plusSlides(1)&quot;</span><span class="p">&gt;</span>❯<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;closing&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;closeSlides()&quot;</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span>X<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
  <span class="cm">&lt;!--Indication of current image--&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;text-align:center&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;dot&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;currentSlide(1)&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;dot&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;currentSlide(2)&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;dot&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;currentSlide(3)&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The defined structure of elements is then styled according to the developer needs.
In the case of the Farnese Castle, the appeareance has been defined in the <em>assets/css/style.css</em> file:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="c">/* Slideshow container */</span><span class="w"></span>
<span class="p">.</span><span class="nc">slideshow-container</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* Next &amp; previous buttons */</span><span class="w"></span>
<span class="p">.</span><span class="nc">prev</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">next</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">closing</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">-22</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="kc">bold</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6</span><span class="kt">s</span><span class="w"> </span><span class="kc">ease</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">user-select</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* Position the &quot;next button&quot; to the right */</span><span class="w"></span>
<span class="p">.</span><span class="nc">next</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">right</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* Position the &quot;next button&quot; to the right */</span><span class="w"></span>
<span class="p">.</span><span class="nc">closing</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">right</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* On hover, add a black background color with a little bit see-through */</span><span class="w"></span>
<span class="p">.</span><span class="nc">prev</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">next</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.8</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* Caption text */</span><span class="w"></span>
<span class="p">.</span><span class="nc">photo-slide</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* Caption text */</span><span class="w"></span>
<span class="p">.</span><span class="nc">text</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f2f2f2</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* Number text (1/3 etc) */</span><span class="w"></span>
<span class="p">.</span><span class="nc">numbertext</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f2f2f2</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* The dots/bullets/indicators */</span><span class="w"></span>
<span class="p">.</span><span class="nc">dot</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#bbb</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline-block</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="k">background-color</span><span class="w"> </span><span class="mf">0.6</span><span class="kt">s</span><span class="w"> </span><span class="kc">ease</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">.</span><span class="nc">active</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">dot</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#717171</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* Fading animation */</span><span class="w"></span>
<span class="p">.</span><span class="nc">fade</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">animation-name</span><span class="p">:</span><span class="w"> </span><span class="n">fade</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">animation-duration</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">s</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">@</span><span class="k">keyframes</span><span class="w"> </span><span class="nt">fade</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">from</span><span class="w"> </span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mf">.4</span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nt">to</span><span class="w"> </span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c">/* On smaller screens, decrease text size */</span><span class="w"></span>
<span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="nt">only</span><span class="w"> </span><span class="nt">screen</span><span class="w"> </span><span class="nt">and</span><span class="w"> </span><span class="o">(</span><span class="nt">max-width</span><span class="o">:</span><span class="w"> </span><span class="nt">300px</span><span class="o">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">.</span><span class="nc">prev</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">next</span><span class="o">,</span><span class="p">.</span><span class="nc">text</span><span class="w"> </span><span class="p">{</span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="kt">px</span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">#</span><span class="nn">split-container</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">float</span><span class="p">:</span><span class="w"> </span><span class="kc">left</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Later in the <em>index.html</em> code the <strong>.closeSlides()</strong> is defined as follow:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">closeSlides</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#anno10&quot;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="c1">//reset opacity of parent page</span><span class="w"></span>
<span class="w">  </span><span class="nx">parentWin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">sidebar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parentWin</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;split-container&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The <strong>.showSlides()</strong> function is instead defined by first associating each <em>div</em> element of interest to dedicated variable.
Then, through the slide index is used to call the desired image panel within a list of specific class element.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">showSlides</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">slides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">&quot;mySlides&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">dots</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">&quot;dot&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">slides</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">slideIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">slideIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">slides</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">slides</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">slides</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">dots</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">dots</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dots</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; active&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nx">slides</span><span class="p">[</span><span class="nx">slideIndex</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;block&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">dots</span><span class="p">[</span><span class="nx">slideIndex</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">].</span><span class="nx">className</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot; active&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Then, <strong>.plusSlides()</strong> and <strong>.currentSlide()</strong> are defined as needed according to their linked button:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">plusSlides</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">showSlides</span><span class="p">(</span><span class="nx">slideIndex</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">n</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">currentSlide</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">showSlides</span><span class="p">(</span><span class="nx">slideIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">n</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="indoor-navigation">
<h2>Indoor navigation<a class="headerlink" href="#indoor-navigation" title="Permalink to this heading">¶</a></h2>
<p>The exploration of the 3D reconstruction of the indoor portion of Bastione San Giacomo was defined through a series of actions included into annotations.</p>
<img alt="Entry of the indoor portion of San Giacomo Bastion" class="align-center" src="../_images/indoor-entry.jpg" />
<p>In particular, the following actions were implemented:</p>
<ul class="simple">
<li><p>Changing view and scene;</p></li>
<li><p>Showing image pop-up;</p></li>
<li><p>Playing animations.</p></li>
</ul>
<section id="changing-view-and-scene">
<h3>Changing view and scene<a class="headerlink" href="#changing-view-and-scene" title="Permalink to this heading">¶</a></h3>
<p>This action is implemented in the <em>Start exploring!</em> annotation located in the center of the entrance.
Its goal is to trigger the movement from the indoor environment to the outdoor scene.</p>
<p>In order to do so, an input button element is defined in the annotation name.
Then, the action is defined by defining the series of operations to be executed when the button whose name is “outdoor” is clicked by the user.</p>
<img alt="Example of button action for changing view and scene" class="align-center" src="../_images/go-back-outdoor.jpg" />
<p>This event will first call the function <em>changeHotspotName()</em>, changing the hotspot name to the one of the reference point of interest on which the new scene will be focused.
In this case, it will be the outdoor of the San Giacomo bastion. So, the name to be included within the brackets is “San Giacomo”.</p>
<p>Hence, the <em>moveHere()</em> method of the Annotation class is applied to the third element ([2]) of the annotation list defined in the <em>loadannotations.js</em> file.
In this case, it was needed to switch to the camera view defined in the Bastione San Giacomo annotation that was defined as the third in the js file.
By applying this method, the new view will automatically be set considering the coordinates and orientations included in the referred annotation.</p>
<p>Eventually, the visibility of annotations is changed according to the new view.
Consequently, the visible property of all the annotation children defined inside the bastion is set to <em>false</em>, while the one of the new outdoor scene annotations is changed to <em>true</em>.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>  ...
{
  // Indoor
  let Titolo4 = $(&#39;<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Start exploring! <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;outdoor&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Go back outdoor!&quot;</span><span class="p">/&gt;&lt;/</span><span class="nt">span</span> <span class="p">&gt;</span> &#39;)
  Titolo4.find(&quot;input[name=outdoor]&quot;).click((event) =&gt; {
      event.stopPropagation();
      changeHotspotName(&quot;San Giacomo&quot;);
      scenears.annotations.children[2].moveHere(scenears.camera);
      scenears.annotations.children[0].visible = true;
      scenears.annotations.children[1].visible = true;
      scenears.annotations.children[2].visible = true;
      scenears.annotations.children[3].visible = false;
      scenears.annotations.children[4].visible = false;
      scenears.annotations.children[5].visible = false;
      scenears.annotations.children[6].visible = false;
      scenears.annotations.children[7].visible = false;
      scenears.annotations.children[8].visible = false;
      scenears.annotations.children[9].visible = false;
      scenears.annotations.children[10].visible = false;
      scenears.annotations.children[11].visible = false;
      scenears.annotations.children[12].visible = false;
      scenears.annotations.children[13].visible = false;
      scenears.annotations.children[14].visible = false;
      scenears.annotations.children[15].visible = false;
      scenears.annotations.children[16].visible = false;
  });
  Titolo4.toString = () =&gt; &quot;Start exploring!&quot;;
  let nota4 = new Potree.Annotation({
      position: [553471.056, 4988913.293, 95.054],
      title: Titolo4,
      cameraPosition: [553474.7425516201, 4988912.090928567, 96],
      cameraTarget: [553471.056, 4988913.293, 96],
      description: &#39;<span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Welcome to the indoor portion of the San Giacomo rampart!<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>----<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>This space is the site of a permanent exhibition of historic cartography and documents about the evolution of the city of Piacenza.<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>You can start exploring the two wings of this space by clicking on the <span class="p">&lt;</span><span class="nt">i</span><span class="p">&gt;</span>&quot;Tour Right&quot;<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span> and <span class="p">&lt;</span><span class="nt">i</span><span class="p">&gt;</span>&quot;Tour Left&quot;<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span> annotations.<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>The indoor point cloud has been completely acquired through TLS scans with a CAM2 Focus M70.&#39;
  })
  nota4.visible = false;
  scenears.annotations.add(nota4);

}
</pre></div>
</div>
<p>…</p>
</section>
<hr class="docutils" />
<section id="showing-image-pop-up">
<h3>Showing image pop-up<a class="headerlink" href="#showing-image-pop-up" title="Permalink to this heading">¶</a></h3>
<p>The orbit icon included in the indoor annotations is associated to an image detail.
Indeed, after clicking on it, the platform shows a pop up with the image attached to the annotation of interest.
To return to the navigation scene, the user could simply click on the faded area outside the shown image.</p>
<img alt="Example of the image pop-up action on print." class="align-center" src="../_images/indoor-image-pop-up.jpg" />
<p>This action is firstly prepared by definind a div element in the <em>index.html</em> page: it will be the panel that will appear in the middle of the screen when the annotation is clicked.
Inside it, an images tag is defined with the link to the source file path of the image that will be included in the panel when visible.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--Paolo III print--&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;anno8&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navPanel w3-center w3-animate-opacity&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navPanel-content&quot;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;intrinsic-container intrinsic-container-16x9&quot;</span><span class="p">&gt;</span>
                  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;anno_img&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/anno-img/paoloIII.jpg&quot;</span> <span class="p">/&gt;</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<hr class="docutils" />
<p>The style for the panel - with rounded corner and position settings - is instead defined in the <em>assets/css/style.css</em> file.</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">navPanel-content</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<hr class="docutils" />
<p>Finally, the annotation is defined with its title and action.
The latter one is implemented by including the orbit control icon in the annotation title: this img tag will be the one looked for by the <em>find()</em> method in the next line.
In this way, the click event will first set the camera view in correspondence of the annotation clicked.
Then, the div #anno8 previously defined is retrieved and the <em>.fadeIn()</em> method is applied to it.
In this way, the panel will gradually appear in the middle of the screen and the Potree scene below will appear more opaque.
Similarly, a new click event on the window will trigger the <em>.fadeOut()</em> method applied to the same div element.
Finally, the annotation panel will disappear and the view will return to the previous Potree scene.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// Paolo III print</span><span class="w"></span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">Titolo16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$</span><span class="p">(</span><span class="sb">`</span>
<span class="sb">          &lt;span&gt;</span>
<span class="sb">              &lt;img src=&quot;./libs/potree/resources/icons/orbit_controls.svg&quot; name=&quot;anno_panel8&quot; class=&quot;annotation-action-icon&quot; &quot;/&gt;</span>
<span class="sb">          &lt;/span&gt;</span>
<span class="sb">      `</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">elAnno10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Titolo16</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;img[name=anno_panel8]&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="nx">elAnno10</span><span class="p">.</span><span class="nx">click</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">15</span><span class="p">].</span><span class="nx">moveHere</span><span class="p">(</span><span class="nx">scenears</span><span class="p">.</span><span class="nx">camera</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#anno8&quot;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span><span class="w"></span>
<span class="w">          </span><span class="nx">parentWin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="kd">var</span><span class="w"> </span><span class="nx">sidebar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parentWin</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;split-container&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.2&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="p">});</span><span class="w"></span>
<span class="w">      </span><span class="kd">var</span><span class="w"> </span><span class="nx">annoPanel8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;anno8&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="nx">annoPanel8</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#anno8&quot;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span><span class="w"></span>
<span class="w">          </span><span class="c1">//reset opacity of parent page</span><span class="w"></span>
<span class="w">          </span><span class="nx">parentWin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="kd">var</span><span class="w"> </span><span class="nx">sidebar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parentWin</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;split-container&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="p">});</span><span class="w"></span>
<span class="w">      </span><span class="nx">Titolo16</span><span class="p">.</span><span class="nx">toString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;Paolo II print&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">nota16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Potree</span><span class="p">.</span><span class="nx">Annotation</span><span class="p">({</span><span class="w"></span>
<span class="w">          </span><span class="nx">position</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553468.173</span><span class="p">,</span><span class="w"> </span><span class="mf">4988913.334</span><span class="p">,</span><span class="w"> </span><span class="mf">96.274</span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">Titolo16</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">cameraPosition</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553470.5484979739</span><span class="p">,</span><span class="mf">4988913.944287285</span><span class="p">,</span><span class="mf">97.04518532773058</span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nx">cameraTarget</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553468.173</span><span class="p">,</span><span class="w"> </span><span class="mf">4988913.334</span><span class="p">,</span><span class="w"> </span><span class="mf">96.274</span><span class="p">],</span><span class="w"></span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;b&gt;Paolo II print&lt;/b&gt;&lt;br&gt;----&lt;br&gt;The Pope is shown seated and flanked by Cardinal Alessandro Farnese as he approves the plan of the castle of Piacenza. The plan is presented to him by Pierluigi, who is kneeling, and is dressed in yellow and blue and has a white mantle. Architecture can be glimpsed in the background.&lt;br&gt;Original paint from 1685 - 1687 by Sebastiano Ricci, preserved at the Civic Museum of the Farnese Palace (Piacenza).&lt;br&gt;----&lt;br&gt;&lt;img src=&quot;assets/anno-img/paoloIII.jpg&quot; alt=&quot;Paolo III Print&quot; title=&quot;Paolo III Print&quot; width=&quot;270px&quot;&gt;&#39;</span><span class="w"></span>
<span class="w">      </span><span class="p">})</span><span class="w"></span>
<span class="w">      </span><span class="nx">nota16</span><span class="p">.</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">nota16</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="playing-animations">
<h3>Playing animations<a class="headerlink" href="#playing-animations" title="Permalink to this heading">¶</a></h3>
<p>In the indoor exploration, 2 animations are implemented for navigating the right and left wing of the reconstructed model.
This type of action could be helpful for defining a pre-fixed user exploration path and consequently changing the visibility of some particular annotations depending on exploration positions.</p>
<video controls src="..\_static\animation-annotation.mp4" width="400"></video><hr class="docutils" />
<p>First, the definition of the animation is set in <em>assets/js/loadanimations.js</em>.
This is done by initially creating the animation object, then defining the camera and targets positions.
An easy way to achieve so is to navigate the model and, one the desired view for a camera animation node is found, export the Potree scene information by clicking on the sidebar <em>Scene&gt;Export: Potree</em>.
In the downloaded <em>potree.json</em> file, it will be possible to copy the coordinates of the camera and target position of that specific view.
Then, those values can be pasted respectively in the position and target lists as shown in the script example below.
By defining multiple camera and target positions as explained before, it will be possible to create an equal amount of view point that will be interpolated when the animation play action is triggered.
This type of process is explained in the code through a for loop that creates as many animation nodes (control points) as there are camera and target positions defined.</p>
<p>After that, the animation is added as an object of the scene through the <em>.addCameraAnimation()</em> method and its visibility is set to false so that the associated colored trajectory line remains hidden.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">animation2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Potree</span><span class="p">.</span><span class="nx">CameraAnimation</span><span class="p">(</span><span class="nx">viewer</span><span class="p">);</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">positions2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553471.5649587561</span><span class="p">,</span><span class="w"> </span><span class="mf">4988912.824383096</span><span class="p">,</span><span class="w"> </span><span class="mf">96.74929992934102</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553470.8266211117</span><span class="p">,</span><span class="w"> </span><span class="mf">4988920.956978676</span><span class="p">,</span><span class="w"> </span><span class="mf">96.96684674759675</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553468.970057797</span><span class="p">,</span><span class="w"> </span><span class="mf">4988925.671973037</span><span class="p">,</span><span class="w"> </span><span class="mf">96.93937869520164</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553466.3895679122</span><span class="p">,</span><span class="w"> </span><span class="mf">4988928.694618191</span><span class="p">,</span><span class="w"> </span><span class="mf">96.67629091896133</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553464.5111995947</span><span class="p">,</span><span class="w"> </span><span class="mf">4988930.979751398</span><span class="p">,</span><span class="w"> </span><span class="mf">96.70556033095784</span><span class="p">]</span><span class="w"></span>
<span class="p">];</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">targets2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553470.899</span><span class="p">,</span><span class="w"> </span><span class="mf">4988918.329</span><span class="p">,</span><span class="w"> </span><span class="mf">95.915</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553470.7600219863</span><span class="p">,</span><span class="w"> </span><span class="mf">4988921.507467228</span><span class="p">,</span><span class="w"> </span><span class="mf">96.832169690892</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553468.7403491414</span><span class="p">,</span><span class="w"> </span><span class="mf">4988926.177655794</span><span class="p">,</span><span class="w"> </span><span class="mf">96.80849752652905</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553465.620604052</span><span class="p">,</span><span class="w"> </span><span class="mf">4988930.300358385</span><span class="p">,</span><span class="w"> </span><span class="mf">96.4827080923057</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mf">553464.0111806979</span><span class="p">,</span><span class="w"> </span><span class="mf">4988932.023884267</span><span class="p">,</span><span class="w"> </span><span class="mf">96.57968306104952</span><span class="p">]</span><span class="w"></span>
<span class="p">];</span><span class="w"></span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">positions2</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">cp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">animation2</span><span class="p">.</span><span class="nx">createControlPoint</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="nx">cp</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">set</span><span class="p">(...</span><span class="nx">positions2</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">  </span><span class="nx">cp</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">set</span><span class="p">(...</span><span class="nx">targets2</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">scenears</span><span class="p">.</span><span class="nx">addCameraAnimation</span><span class="p">(</span><span class="nx">animation2</span><span class="p">);</span><span class="w"></span>
<span class="nx">animation2</span><span class="p">.</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<hr class="docutils" />
<p>Once the animation is defined, it’s time to set how it should be triggered through a click event on the Potree scene.
This again results in the use of an icon and of the <em>find()</em> method.
When the icon is clicked, the animation is then activated thorugh the line <em>animation2.play()</em>.
In the same code block, the visibility of the desired annotation is changed according to the developer needs.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Tour Right</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">Titolo6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$</span><span class="p">(</span><span class="sb">`</span>
<span class="sb">              &lt;span&gt;</span>
<span class="sb">                  Tour Right</span>
<span class="sb">                  &lt;img src=&quot;./libs/potree/resources/icons/goto.svg&quot; name=&quot;action_set_animation2&quot; class=&quot;annotation-action-icon&quot; style=&quot;filter: invert(1);&quot;/&gt;</span>

<span class="sb">                  &lt;/span&gt;</span>
<span class="sb">              `</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">elPlay2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Titolo6</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;img[name=action_set_animation2]&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="nx">elPlay2</span><span class="p">.</span><span class="nx">click</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nx">animation2</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">12</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">14</span><span class="p">].</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">});</span><span class="w"></span>
<span class="w">  </span><span class="nx">Titolo6</span><span class="p">.</span><span class="nx">toString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;Tour Right&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">nota6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Potree</span><span class="p">.</span><span class="nx">Annotation</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="nx">position</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553470.899</span><span class="p">,</span><span class="w"> </span><span class="mf">4988918.329</span><span class="p">,</span><span class="w"> </span><span class="mf">94.915</span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">Titolo6</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nx">cameraPosition</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553471.5649587561</span><span class="p">,</span><span class="w"> </span><span class="mf">4988912.824383096</span><span class="p">,</span><span class="w"> </span><span class="mf">96.74929992934102</span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nx">cameraTarget</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">553470.899</span><span class="p">,</span><span class="w"> </span><span class="mf">4988918.329</span><span class="p">,</span><span class="w"> </span><span class="mf">95.915</span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Click on the icon and walk through the indoor left wing of the bastion...&lt;br&gt;----&lt;br&gt;You may discover a &lt;b&gt;secret passage&lt;/b&gt;!&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="w">  </span><span class="nx">nota6</span><span class="p">.</span><span class="nx">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">scenears</span><span class="p">.</span><span class="nx">annotations</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">nota6</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<hr class="docutils" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Another useful tip to facilitate user pre-fixed movements and explorations with the model scene is to position an annotation at the end of the animation path that includes an action allowing to return to the initial scene view, as the example view.</p>
</div>
<video controls src="..\_static\animation-annotation-tip.mp4" width="400"></video></section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Potree-chtemplate</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Methodology and data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Platform implementation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#control-icons">Control icons</a></li>
<li class="toctree-l2"><a class="reference internal" href="#outdoor-navigation">Outdoor navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#indoor-navigation">Indoor navigation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ref.html">References</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="data.html" title="previous chapter">Methodology and data</a></li>
      <li>Next: <a href="ref.html" title="next chapter">References</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Federica Gaspari, Francesco Ioli, Federico Barbieri, Clara Rivieri, Michele Dondi, Livio Pinto.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/pages/template-implementation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>